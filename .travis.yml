language: android

android:
  components:
  - tools
  - tools
  - build-tools-24.0.3
  - android-24
  - extra-android-m2repository
  - extra-android-support

jdk:
- oraclejdk8

env:
  global:
  - secure: 'MMeo2jUXUz0tFFGXPpIroSe8phCZZ5UKFjt17EoKdjEcZsiVvijXasfkeGRjOl1UGiaS1aL0Qu/K+TSGeEOMOf5k7QBtt5tvUSSehEHs17wzJa+2PeZRRQ+X/VzXb/BmLY46T5gIFrLdBs/N30JtBp68g3JDmXfdr3/4BHLJyOiZ6ulw1MyuRNl25jU2nF5IB6DvkO+GTDU2dVFE6bRjR/TCODAkmJQ+zgyQ7+PgBR2YSbfA6meGfPf55EyRcflPZlWpYYNiUdeXbwS/LS3RnDdYVVcDQD9FGJmuHAnGvve2bNjtqDVItIv/u0qxZZrwOGdNQaj/7tLU0YbpcQV8IZZOO0MAcN3SWJiUjiZeCPJqrJGA1V0hSdbVlOfKyBComHswMMCOOg0Oo8yGSho7Zug56b0TCXVNeBzW/NswWLvfsbTVEUziCVFvX1VRwWb6mYJBzTIGmGY/HouJc7QtJDw5wAUgIv9mac9VM0hRhc43840jDguSh33bT2XpmCM5GhGEwAZe94uPBwUoOlWaRj8GBBNIHhIwVHww3JTNLhwr5NWjPVeE3MNmFTCy2lETpXrpQv0j6+nhJfBGa7mpmu0XQ1aBslYMjytwurTKuK+KzFRARel3iwWV9Vb36b26femiBMNuaboviRjLi/SzT530tb0U41UgS0jO2/we7sQ='
  - secure: 'VV8EQDHvjj76+eygmfc+fFW/cWI6yPGjvyLgZt+RKvlmXd5HazpzammRh64ogxfDVlS5c7ln6fQyNaLWWs2qvOD9M/MthOWucId0iHKOFUo9Cml2Og70npPO3S/kpOrFRuQOHpc8l+BtRBrL4Wp0MfPotaqP6MET/0fvOe1pQrnSgCcuLRduFGy5uJAMzG86QoEh3gNjv0ZjtLgS5X+Uc4r72T6f66i9fJuqp2AVAoOeS91Tj1IqMfJ1GJkeep9vtl/TIAwlDTUfNQYF8IG2lbWsYlKkHF34ZkRvReqwEo3z54PKyjdcd4iD/HmPI9Jg7V+LnyKZsDO7LcDqt6pWKoclcKQVURpoLjBL+l/tNQZNYCQvyobwqWuQ/1Srs48zXW2el2ek4HGoqRXU+7JxxmMwuEypJWLkHZ02aG2sVgz76dKVg3HcaOI86Lf2HcHqOshVb6SqDsx2PRBIFlTFuk/loBdlwbhakvBVQFT8mulp0Iz7kEXPxO9cVp//nRvO3m2gZvtxNEKHzvdXkrNHh0hIz7uRSes81CYmlJ7itleeWPcAdziCjRWpiacwd2hOaOA2s/oNsLJmeRT43HeR8gNRfuZQdNyAjACQ0oT7oBw4JRIvW7X/6AJbE5gFnj5fbfbGhJ0D0Xk5JMtjAg+1lUKikjnIpryWonMi8lshsvo='

before_install:
- openssl aes-256-cbc -K $encrypted_b37d956b1dfb_key -iv $encrypted_b37d956b1dfb_iv
  -in release.keystore.enc -out release.keystore -d || true

before_script:
- wget http://services.gradle.org/distributions/gradle-2.14.1-bin.zip
- unzip gradle-2.14.1-bin.zip
- export GRADLE_HOME=$PWD/gradle-2.14.1
- export PATH=$GRADLE_HOME/bin:$PATH

script: gradle build

before_deploy:
- cd app/build/outputs/apk
- md5sum app-release.apk > md5sum.txt
- sha1sum app-release.apk > sha1sum.txt
- cd -

deploy:
  provider: releases
  api_key:
    secure: 'SvdI+5/Gv0eQ93rZ/CRPpnJgPl6Ix56TpjjK7H7VLEqte8jx6H09CCAw0zgJ0rhjCLVp4ijcbI/CeTQ+MpB25dD4msrjGZwkSqVHGNWogAitgoB44+BhCAlSgio+h7ZOTxZ77L27j8yfd9kboSDPhzbPi8mwg6mbMfMfHzcTvR/9Lrv5C6dSXnN/zjOC/+/eex9WTeR8sHIwgnCq42Yo1oIgaJF+HkC1Lc09zxjuvceEMTusO++WVf9CEx9AXcArX2fjF2vLU8dTjkhVA1n4pI90WY+SBiE7JH6nQaR2DazEuJ32YZDsbCjqSVbW+2gl+9OE7ZUOpDez9yOJvHx8tYJw58w1z6zSadLae4UuBTdBXAWA3MwABfda1SL5Z7+AT3yNSO1gARn70rEjPuwgfc7uTQU/diKOv7XUOAryzJTdD6LAHtq9kKj0+ystqk/42AQLTy0eY6NQFjc1T9z+2/C/GenlANkJtOB5DSIue9mp2pXyetRvuM5bwYdmdWzUtHW69tCDOr3DCH7aJpnfwZoYyxisxQMapfeOkYrkmgBK9CH3Vr4NsidbjLLDdFrNJ8v+BcFPKy62MoWXE5MJurn827o6vbLDt2DKiSRWXC++zYHvv3pF962q4Bm2C9LF0ZJHJq1KADvpVduU5GgNE353QWtFGDHblCsolVo3yes='
  file:
  - app/build/outputs/apk/app-release.apk
  - app/build/outputs/apk/md5sum.txt
  - app/build/outputs/apk/sha1sum.txt
  skip_cleanup: true
  on:
    repo: Obsidian-StudiosInc/solitaire
    tags: true
