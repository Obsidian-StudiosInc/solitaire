language: android

android:
  components:
  - tools
  - tools
  - build-tools-24.0.3
  - android-24
  - extra-android-m2repository
  - extra-android-support

jdk:
- oraclejdk8

env:
  global:
  - secure: 'i9b7/nfpX8E7v5GAWsU4PuxvOzf3h7VOykVATJE1QSy9AkyMwnrf54r5Zn43lBg98zJTR7GNdckROvwxPf/f/pym37W8+sGT7Z1CRa4IOQg0Q0vTiPhmUCM5qNCbk/tbf3qyY3jUsNLIo5gKK96uZkle4Fx0bgUA2jY+64niRRUrMp9eOjCcN9hJFZADnWz7JgeDtYIBy6Lm98sRSYUOd/cX9Z1YlY1X6h24p1sxrt6NLS5Q1/HfV2Q/ZGUrfaVAvpCjFOj2nkdw5/4gtp7TRjbf+bO4GrD1VZTyb00Xu4lBMbMyMTeeWU6v0jXDmy52ikn91N9tcsWLL3HGDnlPe99eHcx1bcQFJQVjeiizVyJ0TTvr1ZOjNnOzOewluFOzBqVT2V4h3Cy1AC8oVkhNZ84zjjQ1lO3p2+YQyepUzZepSIcLT885dR3SEptGCajOBAzmsH4wxmQkvObE0l3FG7ky7NPaMVJqpbHx+ghNLl1b314chePc7eW3FFeXmeSjXaKDMLDnmucfPfotdCpPsZ6tcREdQPXe4j/P2TYwby8C/hzuwjUxGtQ3ERO5IK1YLexV3IfP9nExn/tt06ELl9beBoSvUEo9xetFTPH4rroIjeYEiVpv0ckYJNnLstaZmbsmbYk0AEDlQHGJEzoWLJIsmjc/gGHyzxQf31cRvKA='
  - secure: 'WjgJOoCmIgeIUXZU9GO01c3uSHAyheDnBqU+qYKjqhxo6TSWzjZ1EZHRZIsGwVrDX3YD8DTglAqkRVoi9SIwZcEC/Y1tTlw8vywNRamRtOoxlborK4qEte+3kdUOS0+BxZBrSAlPb1Q4NpUtcklj+3nX0/wKHKm9kj0sjmYmMLyQc6GiXqA9By20YWHpWiOlNoCljaiSgIRUSS2SKEKUAlusN8zzMjqAXmX2dAl3l9YnJnJ2Jir6lz6kihq7jt9hFali9jhN/0L+JMcV3KhKZs2SDwrJjpBQVSqLK9WLKzEppjuUwbV7Qf+adLDSI8ZUkspFugmP+8MKNdBfyyj6IA3GkwRQWjvT7xQBWQxy2l1ueUYr1oz7vMw/e1p5gZRwOdZrBYA299mgIvaK6vlY4GZgPUmRjvcGixsGkpEtQf4r2TxBQ1Hf8BPX/cK89sMcLGa4fJ+8ZYyhuYbIugjSKNIzw5xZWn3yAhgujUMQG/8dj/8M1jUsUzxedWKxhNa5h+ooHudtOWYijHsVm+nrNE7SRB+vBDYQI7vgwdorCUecQjWvkeGF97QgXDXepK0uauuAoJdaq/HrbFX5l0urJCDPKvxalCp6CTHLTbbVDjFHlfvTJBof9Bs+XKh2DUF7fgCyZEiVK4reIcjYeyTjl7XAXBUsKTl0QE05hiVCwbo='

before_install:
- openssl aes-256-cbc -K $encrypted_b37d956b1dfb_key -iv $encrypted_b37d956b1dfb_iv
  -in release.keystore.enc -out release.keystore -d || true

before_script:
- wget http://services.gradle.org/distributions/gradle-2.14.1-bin.zip
- unzip gradle-2.14.1-bin.zip
- export GRADLE_HOME=$PWD/gradle-2.14.1
- export PATH=$GRADLE_HOME/bin:$PATH

script: gradle build

before_deploy:
- cd app/build/outputs/apk
- md5sum app-release.apk > md5sum.txt
- sha1sum app-release.apk > sha1sum.txt
- cd -

deploy:
  provider: releases
  api_key:
    secure: 'SvdI+5/Gv0eQ93rZ/CRPpnJgPl6Ix56TpjjK7H7VLEqte8jx6H09CCAw0zgJ0rhjCLVp4ijcbI/CeTQ+MpB25dD4msrjGZwkSqVHGNWogAitgoB44+BhCAlSgio+h7ZOTxZ77L27j8yfd9kboSDPhzbPi8mwg6mbMfMfHzcTvR/9Lrv5C6dSXnN/zjOC/+/eex9WTeR8sHIwgnCq42Yo1oIgaJF+HkC1Lc09zxjuvceEMTusO++WVf9CEx9AXcArX2fjF2vLU8dTjkhVA1n4pI90WY+SBiE7JH6nQaR2DazEuJ32YZDsbCjqSVbW+2gl+9OE7ZUOpDez9yOJvHx8tYJw58w1z6zSadLae4UuBTdBXAWA3MwABfda1SL5Z7+AT3yNSO1gARn70rEjPuwgfc7uTQU/diKOv7XUOAryzJTdD6LAHtq9kKj0+ystqk/42AQLTy0eY6NQFjc1T9z+2/C/GenlANkJtOB5DSIue9mp2pXyetRvuM5bwYdmdWzUtHW69tCDOr3DCH7aJpnfwZoYyxisxQMapfeOkYrkmgBK9CH3Vr4NsidbjLLDdFrNJ8v+BcFPKy62MoWXE5MJurn827o6vbLDt2DKiSRWXC++zYHvv3pF962q4Bm2C9LF0ZJHJq1KADvpVduU5GgNE353QWtFGDHblCsolVo3yes='
  file:
  - app/build/outputs/apk/app-release.apk
  - app/build/outputs/apk/md5sum.txt
  - app/build/outputs/apk/sha1sum.txt
  skip_cleanup: true
  on:
    repo: Obsidian-StudiosInc/solitaire
    tags: true
